# 11.4 Shell编程-条件判断

## 按照文件类型进行判断
| 测试选项 | 作用 |
| ---- | ---- |
| -b 文件 | 判断该文件是否存在，并且是否为块设备文件（是块设备文件为真） |
| -c 文件 | 判断该文件是否存在，并且是否为字符设备文件（是字符设备文件为真） |
| **-d 文件** | 判断该文件是否存在，并且是否为目录文件（是目录为真） |
| **-e 文件** | 判断该文件是否存在（存在为真） |
| **-f 文件** | 判断该文件是否存在，并且是否为普通文件（是普通文件为真） |
| -L 文件 | 判断该文件是否存在，并且是否为符号链接文件（是符号链接文件为真） |
| -p 文件 | 判断该文件是否存在，并且是否为管道文件（是管道文件为真） |
| -s 文件 | 判断该文件是否存在，并且是否为空（非空为真） |
| -S 文件 | 判断该文件是否存在，并且是否为套接字文件（是套接字文件为真） |

### 两种判断格式
1. `test -e /root/install.log`
```bash
`test -e /root/install.log`
echo $?
```

2. `[ -e /root/install.log ]`
```bash
# 注意中括号前后需要空格
[ -e /root/install.log ]
echo $?

# 第一个判断命令如果正确执行，则打印“yes”，否则打印“no”
[ -d /root ] && echo "yes" || echo "no"
```

## 按照文件权限进行判断
| 测试选项 | 作用 |
| ---- | ---- |
| **-r 文件** | 判断该文件是否存在，并且是否该文件拥有读权限（有读权限为真）|
| **-w 文件** | 判断该文件是否存在，并且是否该文件拥有写权限（有写权限为真）|
| **-x 文件** | 判断该文件是否存在，并且是否该文件拥有执行权限（有执行权限为真）|
| -u 文件 | 判断该文件是否存在，并且是否该文件拥有SUID权限（有SUID权限为真）|
| -g 文件 | 判断该文件是否存在，并且是否该文件拥有SGID权限（有SGID权限为真）|
| -k 文件 | 判断该文件是否存在，并且是否该文件拥有SBit权限（有SBit权限为真）|

```bash
[ -w /root/sh/student.txt ] && echo "yes" || echo "no"
```

## 两个文件之间进行比较
| 测试选项 | 作用 |
| ---- | ---- |
| 文件1 -nt 文件2 | 判断文件1的修改时间是否比文件2的新（如果新则为真） |
| 文件1 -ot 文件2 | 判断文件1的修改时间是否比文件2的就（如果旧则为真） |
| 文件1 -ef 文件2 | 判断文件1是否和文件2的Inode号一致，可以理解为两个文件是否为同一个文件。这个判断拥有判断硬链接是很好的方法 |

```bash
# 创建硬链接
ln /root/sh/student.txt /tmp/stu.txt

[ /root//sh/student.txt -ef /tmp/stu.txt ] && echo "yes" || echo "no"
```

## 两个整数之间的比较
| 测试选项 | 作用 |
| ---- | ---- |
| 整数1 `-eq` 整数2 | 判断整数1是否和整数2相等（相等为真）|
| 整数1 `-ne` 整数2 | 判断整数1是否和整数2不相等（不相等为真）|
| 整数1 `-gt` 整数2 | 判断整数1是否大于整数2（大于为真）|
| 整数1 `-lt` 整数2 | 判断整数1是否小于整数2（相等为真）|
| 整数1 `-ge` 整数2 | 判断整数1是否大于等于整数2（大于等于为真）|
| 整数1 `-le` 整数2 | 判断整数1是否小于等于整数2（小于等于为真）|

```bash
[ 23 gt 22 ] && echo "yes" || echo "no"
```

## 字串的判断
| 测试选项 | 作用 |
| ---- | ---- |
| `-z` 字符串 | 判断字符串是否为空（为空返回真）|
| `-n` 字符串 | 判断字符串是否为非空（非空返回真）|
| 字符串1`==` 字符串2 | 判断字符串1是和字符串2相等（相等返回真）|
| 字符串1 `!=` 字符串2 | 判断字符串1是和字符串2不相等（不相等返回真）|

```bash
name=nate
[ -z "$name" ] && echo "yes" || echo "no"

aa=11
bb=11
[ $aa == $bb ] && echo "yes" || echo "no"
[ $aa -eq $bb ] && echo "yes" || echo "no"
```

## 多重判断
| 测试选项 | 作用 |
| ---- | ---- |
| 判断1 `-a` 判断2 | 逻辑与，判断1和判断2都成立，最终的结果才为真 |
| 判断1 `-o` 判断2 | 逻辑或，判断1和判断2有一个成立，最终的结果就为真 |
| !判断 | 逻辑非，使原始的判断式取反 |

```bash
# 判断变量age是否有值，同时判断变量age的值是否大于23
age=24
[ -n "$age" -a "$age" -gt 23 ] && echo "yes" || echo "no"
```
